<div class="p-4 bg-gray-100 flex justify-center ">
  <form [formGroup]="form" (ngSubmit)="onSubmit()" class="w-full max-w-lg">
    <!-- Autocomplete Fields -->
    <div class="flex flex-col sm:flex-row sm:gap-4">
      <!-- Category Input -->
      <mat-form-field class="flex-1" appearance="outline">
        <mat-label>Category</mat-label>
        <input type="text" matInput [matAutocomplete]="categoryAuto" formControlName="category" />
        <mat-autocomplete #categoryAuto="matAutocomplete" (optionSelected)="onCategoryChange($event)">
          <mat-option *ngFor="let option of categories" [value]="option">
            {{ option }}
          </mat-option>
        </mat-autocomplete>
      </mat-form-field>

      <!-- App Input -->
      <mat-form-field class="flex-1" appearance="outline">
        <mat-label>App</mat-label>
        <input type="text" matInput [matAutocomplete]="appAuto" formControlName="app" />
        <mat-autocomplete #appAuto="matAutocomplete">
          <mat-option *ngFor="let app of filteredApps" [value]="app">
            {{ app }}
          </mat-option>
        </mat-autocomplete>
        <mat-error *ngIf="form.get('app')?.hasError('required')">
          App is required
        </mat-error>
      </mat-form-field>
    </div>

    <!-- User Inputs -->
    <div class="flex flex-col sm:flex-row sm:gap-4 mt-4">
      <!-- Username -->
      <mat-form-field class="flex-1" appearance="outline">
        <mat-label>Username</mat-label>
        <input type="text" matInput formControlName="username" />
        <mat-error *ngIf="form.get('username')?.hasError('required')">
          Username is required
        </mat-error>
      </mat-form-field>

      <!-- Password -->
      <mat-form-field class="flex-1" appearance="outline">
        <mat-label>Password</mat-label>
        <input type="password" matInput formControlName="password" />
        <mat-error *ngIf="form.get('password')?.hasError('required')">
          Password is required
        </mat-error>
      </mat-form-field>
    </div>

    <!-- Submit Button -->
    <button type="submit" mat-raised-button color="primary" class="w-full mt-6" [disabled]="form.invalid">
      Submit
    </button>
  </form>

</div>
<div *ngFor="let credential of credentials; let i = index">
  <app-credential-card [credential]="credential" [isSelected]="selectedCardIndex === i" (selectCard)="onCardSelect(i)"
    (edit)="onEditCredential(i)" (delete)="onDeleteCredential(i)"></app-credential-card>
</div>